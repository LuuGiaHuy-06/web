
<head>
    <html lang="jp">
    <link href="styles.css" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanji Practice</title>

    <script type="text/javascript" src="darkmode.js" defer></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Klee+One:wght@400;600&display=swap" rel="stylesheet">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <style>
        #kanji-input {
            font-size: 32px;
            text-align: center;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body>
<header>
    <button id="theme-switch">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-120q-150 0-255-105T120-480q0-150 105-255t255-105q14 0 27.5 1t26.5 3q-41 29-65.5 75.5T444-660q0 90 63 153t153 63q55 0 101-24.5t75-65.5q2 13 3 26.5t1 27.5q0 150-105 255T480-120Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"><path d="M480-280q-83 0-141.5-58.5T280-480q0-83 58.5-141.5T480-680q83 0 141.5 58.5T680-480q0 83-58.5 141.5T480-280ZM200-440H40v-80h160v80Zm720 0H760v-80h160v80ZM440-760v-160h80v160h-80Zm0 720v-160h80v160h-80ZM256-650l-101-97 57-59 96 100-52 56Zm492 496-97-101 53-55 101 97-57 59Zm-98-550 97-101 59 57-100 96-56-52ZM154-212l101-97 55 53-97 101-59-57Z"/></svg>
    </button>
</header>


    <div class="container">
        <nav class="navbar">
            <ul class="nav-links">
                <li class="nav-link">
                    <a href="#">Home</a>
                </li>
                <li class="nav-link level">
                    <a href="#">Level
                        <span class="material-icons dropdown-icon">
                            arrow_drop_down
                        </span>
                    </a>
                    <ul class="drop-down"> 
                        <li class="checkBox" data-value="1" id="1">Level 1</li>
                        <li class="checkBox" data-value="2" id="2">Level 2</li>
                        <li class="checkBox" data-value="3" id="3">Level 3</li>
                        <li class="checkBox" data-value="4" id="4">Level 4</li>
                        <li class="checkBox" data-value="5" id="5">Level 5</li>
                        <li class="checkBox" data-value="6" id="6">Level 6</li>
                        <li class="ok" data-value="ok" id="ok">ok</li>
                    </ul>
                </li>
                <li class="nav-link">
                    <a href="#">About</a>
                </li>
                <li class="nav-link">
                    <a href="#">Contact</a>
                </li>
            </ul>
        </nav>
    </div>

<!-- <h1 id="testing">abc</h1> 
<h1 id="testing">abc</h1>
<h1 id="testingcuren">xyz</h1>-->



<div style="justify-content: center; align-items: center;">

    <div class="big-text">Write a Kanji</div>
    <div class="bar">
        <input type="text" id="kanji-input" autocomplete="off" autofocus class="kanji-input">
    </div>
    <div class="bar">
        <div class="next-kanji" id="new-kanji"></div>
    </div>
</div>

<div style="display: flex; justify-content: space-between; align-items: center;">
    <div class = "source" id="source">Type anything you want!</div>
    <div class="reset-button" id="reset-button">It's too hard, right?</div>
</div>

<div style="display: flex; justify-content: space-between; align-items: center;">
    <img src="testbg.png" alt="Miko Doya" class="resize-image">
    <img src="testbg.png" alt="Miko Nerd" class="resize-image">
</div>


    <script>
        const kanjiLists = [
            "一二三四五六七八九十百千上下左右中大小月日年早木林山川土空田天生花草虫犬人名女男子目耳口手足見音気円入出立休先夕本文字学学校村町森正水火玉王石竹糸貝車金雨赤青白".split(""),
            "数多多少万半形太細広長点丸交光角計直線矢弱強高同親母父姉兄弟妹自友体毛頭顔首心時曜朝昼夜分週春夏秋冬今新古間方南北東西遠近前後内外場地国園谷野原里市京風雪雲池海岩星室戸家寺通門道話言答声聞語読書記紙画絵図工教晴思考知才理算作元食肉馬牛魚鳥羽鳴麦米茶色黄黒来行帰歩走止活店買売午汽弓回会組船明社切電毎合当台楽公引科歌刀番用何".split(""),
            "丁世両主乗予事仕他代住使係倍全具写列助勉動勝化区医去反取受号向君味命和品員商問坂央始委守安定実客宮宿寒対局屋岸島州帳平幸度庫庭式役待急息悪悲想意感想所打投拾持指放整旅族昔昭暑暗曲有服期板柱根植業様横橋次歯死氷決油波注泳洋流消深温港湖湯漢炭物球由申界畑病発登皮皿相県真着短研礼神祭福秒究章童笛第筆等箱級終緑練羊美習者育苦荷落葉薬血表詩調談豆負起路身転軽農返追送速進遊運部都配酒重鉄銀開院陽階集面題飲館駅鼻".split(""),
            "不争井付令以仲伝位低佐例便信倉候借健側働億兆児共兵典冷初別利刷副功加努労勇包卒協単博印参司各周唱器固城埼塩変夫失奈好媛季孫完官害富察岐岡崎巣差希席帯底府康建径徒徳必念愛成戦折挙改敗散料旗昨景最望未末札材束松果栃栄案梅梨械極標機欠残氏民求沖治法泣浅浴清満滋漁潟灯無然焼照熊熱牧特産的省祝票種積競笑管節約結給続縄置老臣良芸芽英茨菜街衣要覚観訓試説課議貨賀軍輪辞辺連達選郡群量録鏡関阜阪陸隊静順願類飛飯養香験鹿".split(""),
            "久仏仮件任似余価保修個停備像再刊判制則効務勢厚句可史告喜営因団囲圧在均型基堂報境墓増士夢妻婦容寄導居属布師常幹序弁張往得復志応快性情態慣技招授採接提損支政故救断旧易暴条枝査格桜検構武歴殺毒比永河液混減測準演潔災燃版犯状独率現留略益眼破確示祖禁移程税築粉精紀素経統絶綿総編績織罪義耕職肥能脈興舎航術衛製複規解設許証評講謝識護豊象財貧責貯貸費貿資賛賞質輸述迷逆造過適酸鉱銅防限険際雑非領額飼".split(""),
            "並亂乳亡仁供俳俵值傷優黨冊處券刻割創劇勤危卵嚴收后否吸呼善困垂域奏奮姿存孝宅宇宗宙寶宣密寸專射將尊就尺屆展層己卷幕幹幼廳座延律從忘忠恩憲我批承擔拜擴捨探推揮操敬敵映晚暖暮朗機枚染株棒模權樹欲段沿泉洗派濟源潮激灰熟片班異疑痛皇盛盟看砂磁私秘穀穴窗筋策簡糖系紅納純絹縱縮署翌聖肺胃背胸腦腸腹臟臨至舌若著蒸藏蠶眾裁裝裏補視覽討訪譯詞誌認誕誠誤論諸警貴賃退遺郵鄉針錢鋼閉閣降陛除障難革頂預骨".split("")
        ];
        let currentKanjiList = [...kanjiLists[0]]; // start with kanjiList1 by default

        let newKanji = ""
        let listIndex = 0
        let link = "takoboto.jp";
        let currentLevels = [1, 2, 3, 4, 5, 6];

        // for initial login
        let initial_login = 0;
        if (initial_login === 0) {
            getKanji(currentLevels);
            initial_login = initial_login + 1;
        }

        function getKanji(currentLevels) {
            listIndex = getRandom(currentLevels);

            currentKanjiList = kanjiLists[listIndex-1];
            newKanji = currentKanjiList[Math.floor(Math.random() * currentKanjiList.length)];
            
            document.getElementById("new-kanji").textContent = "Kanji: " + newKanji + " -   Level: " + listIndex;

            //link = "https://jisho.org/search/" + newKanji + "%20%23kanji";
            link = "https://takoboto.jp/?q=" + newKanji;
            document.getElementById("source").innerHTML = '<a href="' + link + '" target="_blank"> How to write ' + newKanji + ' ?</a>';
        }

        function getRandom(array) { // return 0 to 5 for level 1 to 6
            if (array.length == 0) {
                return 1;
            }
            const randomIndex = Math.floor(Math.random() * array.length);
            return array[randomIndex];
        }

        document.getElementById("kanji-input").addEventListener("input", function() {
            const input = this.value.trim();
            
            if (newKanji === input) {
                getKanji(currentLevels);
                this.value = ""; // Clear input field
            }
        });

        document.getElementById("reset-button").addEventListener("click", function() {
            getKanji(currentLevels);
        });

        
        // Add click event to each box to toggle selection
        document.querySelectorAll('.checkBox').forEach((checkBox) => {
            checkBox.addEventListener('click', function () {
                this.classList.toggle('selected'); // Toggle class instead of always adding
            });
        });

        document.getElementById('ok').addEventListener('click', function () {
            let level = [];
            // Get all checkboxes
            const boxes = document.querySelectorAll('.checkBox');
            
            boxes.forEach((checkBox) => {
                const value = checkBox.dataset.value; // Get data-value
                const targetElement = document.getElementById(value);
                if (checkBox.classList.contains('selected')) { 
                    if (value) { // Ensure value is not undefined or empty
                        level.push(value);
                        if (targetElement) { // Check if element with this ID exists
                            targetElement.style.background = 'url("mikoPon.png") no-repeat';
                            targetElement.style.color = "#005e84";
                        }
                    }
                } else {
                    level = level.filter(item => item !== value)
                    targetElement.style.background = 'antiquewhite';
                    targetElement.style.color = "black";
                }
            });
            
            currentLevels = [...level];
            // Get new Kanji suit with current levels
            getKanji(currentLevels);

            // Show result based on correctness (debug)
            //document.getElementById('testing').innerHTML = level;
            //document.getElementById('testingcuren').innerHTML = currentLevels;
        });


            
    </script>

</body>
</html>
